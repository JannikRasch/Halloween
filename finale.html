<!doctype html>
<html lang="de"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Der Kreis der Erl√∂sung</title>
<style>

@import url('https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&display=swap');
body{margin:0;padding:1.2rem;background:radial-gradient(circle at 20% 20%, #050507, #000);color:#e6e2d3;font-family:'Cinzel Decorative',serif;min-height:100vh;overflow-y:auto;}
.container{max-width:920px;margin:0 auto;}
.card{background:rgba(10,10,12,0.6);padding:18px;border-radius:12px;}
.playbtn{background:#0b1220;color:#9fd8ff;border-radius:8px;padding:10px 14px;border:none;cursor:pointer}
.input{display:block;width:100%;padding:10px;margin-top:12px;border-radius:8px;border:1px solid #333;background:#0c0c0e;color:#efe7c6}

body{background:radial-gradient(circle at 30% 20%, #001021, #000018); color:#dfefff}
.card{background:rgba(5,10,20,0.75);border:1px solid rgba(80,160,255,0.06)}
.runecanvas{width:100%;height:360px;display:block;margin:16px 0}
.playbtn{background:#062033;color:#bfe9ff;padding:10px 14px;border-radius:8px;border:none;cursor:pointer}
.final-button{background:#08314a;color:#cfeeff;padding:10px 14px;border-radius:10px;border:1px solid rgba(150,220,255,0.06)}
.success-box{background:rgba(10,30,50,0.6);border:1px solid rgba(120,200,255,0.08);padding:12px;border-radius:8px;margin-top:12px}
</style>
</head><body>
<div class="container"><div class="card">
<h1>Der Kreis der Erl√∂sung</h1>
<button class="playbtn" id="playBtn">üîä Hinweis abspielen</button>
<audio id="audio" src="audio/finale.mp3"></audio>
<div class="hintbox"><p>Im Finale pr√ºft das Siegel eure Antworten. Wenn alles stimmt, werdet ihr den Gegenzauber sprechen k√∂nnen.</p></div>
<canvas id="runecast" class="runecanvas"></canvas>
<div id="interaction" style="margin-top:12px">
  <p class="small">Dr√ºckt auf 'Pr√ºfe das Siegel' um zu sehen, ob eure gespeicherten Antworten korrekt sind.</p>
  <button id="checkAll" class="final-button">Pr√ºfe das Siegel</button>
  <div id="results" style="margin-top:12px"></div>
</div>
<hr>
<strong>Sprechertext (f√ºr TTS):</strong>
<pre style="white-space:pre-wrap;background:rgba(0,0,0,0.25);padding:8px;border-radius:6px">(Dramatischer Chor, Herzschlag, steigende Spannung)
Ton: eindringlich, triumphal am Ende. Zuerst leise, dann zunehmend kraftvoll.

"Nun sei das Siegel gebrochen, wenn die Reihenfolge stimmt und die Gaben korrekt dargebracht."
Sprecheranweisung: Sprich die Zeilen langsam, mit Nachdruck; lasse nach der letzten Zeile ein kurzes Schweigen, dann ein heller Chime.

(Ende: Nachhall, sanftes Ausklingen)
</pre></div></div>
<script>
document.getElementById('playBtn').addEventListener('click', function(){ document.getElementById('audio').play(); });

const canvas = document.getElementById('runecast');
const ctx = canvas.getContext('2d');
function resize(){ canvas.width = canvas.clientWidth; canvas.height = canvas.clientHeight; }
window.addEventListener('resize', resize); resize();
const runes = ['·ö†','·ö¢','·ö¶','·ö®','·ö±','·ö≤','·ö∫','·öæ','·õÉ','·õá','·õà','·õâ','·õã','·õè','·õí','·õñ','·õó','·õö','·õú','·õû','·õü'];
let angle=0; let glow=0; let success=false;
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  const cx = canvas.width/2, cy = canvas.height/2, R = Math.min(canvas.width,canvas.height)/3;
  const g = ctx.createRadialGradient(cx,cy,10,cx,cy,R*1.4);
  g.addColorStop(0,'rgba(40,80,120,0.12)'); g.addColorStop(1,'rgba(0,0,0,0)');
  ctx.fillStyle = g; ctx.fillRect(0,0,canvas.width,canvas.height);
  for(let i=0;i<16;i++){
    const a = angle + i*(Math.PI*2/16);
    const x = cx + Math.cos(a)*R, y = cy + Math.sin(a)*R;
    ctx.font = Math.floor(R/5)+'px serif';
    ctx.fillStyle = success ? 'rgba(180,240,255,'+(0.5+0.4*Math.sin(angle*3))+')' : 'rgba(140,190,220,0.26)';
    ctx.save(); ctx.translate(x,y); ctx.rotate(a+Math.PI/2); ctx.fillText(runes[(i*3)%runes.length], -12, 6); ctx.restore();
  }
  ctx.beginPath();
  ctx.arc(cx,cy, R*0.45, 0, Math.PI*2);
  ctx.strokeStyle = success ? 'rgba(160,220,255,0.9)' : 'rgba(120,180,220,0.35)';
  ctx.lineWidth = success ? 6 : 2; ctx.stroke();
  glow += 0.03;
  const galpha = 0.08 + 0.04*Math.sin(glow*2);
  ctx.fillStyle = 'rgba(90,150,200,'+galpha+')'; ctx.beginPath(); ctx.arc(cx,cy, R*0.15,0,Math.PI*2); ctx.fill();
  angle += 0.002 + (success?0.01:0);
  requestAnimationFrame(draw);
}
draw();
const correct = {"r1": "Schatten,Zeichen,Licht,Opfer", "r2": "69723", "r3": "kerze,blut,asche,salz,wasser", "r4": "FIC"};

document.getElementById('checkAll').addEventListener('click', function(){
  const r1 = (localStorage.getItem('r1_answer')||'').trim();
  const r2 = (localStorage.getItem('r2_answer')||'').trim();
  const r3 = (localStorage.getItem('r3_answer')||'').trim();
  const r4 = (localStorage.getItem('r4_answer')||'').trim().toUpperCase();
  const norm = s=>s.toString().split(',').map(x=>x.trim().toLowerCase()).join(',');
  let all = true; const out = document.getElementById('results'); out.innerHTML='';
  if(r1 && norm(r1)===norm(correct.r1)){ out.innerHTML += '<div style="color:#9be89b">R√§tsel 1: Korrekt</div>'; } else { out.innerHTML += '<div style="color:#f18b8b">R√§tsel 1: FALSCH</div>'; all=false; }
  if(r2 && r2===correct.r2){ out.innerHTML += '<div style="color:#9be89b">R√§tsel 2: Korrekt</div>'; } else { out.innerHTML += '<div style="color:#f18b8b">R√§tsel 2: FALSCH</div>'; all=false; }
  if(r3 && r3===correct.r3){ out.innerHTML += '<div style="color:#9be89b">R√§tsel 3: Korrekt</div>'; } else { out.innerHTML += '<div style="color:#f18b8b">R√§tsel 3: FALSCH</div>'; all=false; }
  if(r4 && r4===correct.r4){ out.innerHTML += '<div style="color:#9be89b">R√§tsel 4: Korrekt</div>'; } else { out.innerHTML += '<div style="color:#f18b8b">R√§tsel 4: FALSCH</div>'; all=false; }
  if(all){ out.innerHTML += '<div class="success-box">Alle R√§tsel korrekt! Der Gegenzauber wird gesprochen...</div>'; success=true; new Audio('audio/sfx_chime.mp3').play(); setTimeout(function(){ new Audio('audio/finale.mp3').play(); },900); } else { success=false; new Audio('audio/sfx_wrong.mp3').play(); }
});

</script>
</body></html>